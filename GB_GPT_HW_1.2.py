'''
*
ÐœÐ¸Ð½Ð¸-ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ‚Ð¾Ñ€ ÑÐ¾ Ð²ÑÑ‚Ñ€Ð¾ÐµÐ½Ð½Ñ‹Ð¼Ð¸ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ°Ð¼Ð¸
ÐÐ°Ð¿Ð¸ÑˆÐ¸ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñƒ, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ:
1.	Ð—Ð°Ð¿Ñ€Ð°ÑˆÐ¸Ð²Ð°ÐµÑ‚ Ñƒ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð²Ð¸Ð´Ð°:
2.	Ñ‡Ð¸ÑÐ»Ð¾ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ñ Ñ‡Ð¸ÑÐ»Ð¾
ÐÐ°Ð¿Ñ€Ð¸Ð¼ÐµÑ€:
15 + 7
10 / 0
3 ** 4
3.	ÐŸÐ¾Ð´Ð´ÐµÑ€Ð¶Ð¸Ð²Ð°ÐµÑ‚ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸: +, -, *, /, ** (Ð²Ð¾Ð·Ð²ÐµÐ´ÐµÐ½Ð¸Ðµ Ð² ÑÑ‚ÐµÐ¿ÐµÐ½ÑŒ).
4.	Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐµÑ‚ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð´Ð»Ñ:
o	Ð¿Ð°Ñ€ÑÐ¸Ð½Ð³Ð° ÑÑ‚Ñ€Ð¾ÐºÐ¸;
o	Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ð¸Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¸;
o	Ð·Ð°Ð¿ÑƒÑÐºÐ° Ð¾ÑÐ½Ð¾Ð²Ð½Ð¾Ð³Ð¾ Ñ†Ð¸ÐºÐ»Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹ ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ‚Ð¾Ñ€Ð°.
5.	ÐžÐ±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÐµÑ‚ Ð¾ÑˆÐ¸Ð±ÐºÐ¸ Ñ‡ÐµÑ€ÐµÐ· try / except:
o	Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð½Ð° Ð½Ð¾Ð»ÑŒ;
o	Ð½ÐµÐ²ÐµÑ€Ð½Ñ‹Ð¹ Ð²Ð²Ð¾Ð´ (Ð½Ð°Ð¿Ñ€Ð¸Ð¼ÐµÑ€, a + b);
o	Ð½ÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°Ñ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ñ.
6.	Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð² Ñ†Ð¸ÐºÐ»Ðµ Ð´Ð¾ Ñ‚ÐµÑ… Ð¿Ð¾Ñ€, Ð¿Ð¾ÐºÐ° Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð½Ðµ Ð²Ð²ÐµÐ´ÐµÑ‚ exit.
*
Ð¢ÐµÐ¿ÐµÑ€ÑŒ ÐºÐ°Ð»ÑŒÐºÑƒÐ»ÑÑ‚Ð¾Ñ€ Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑƒÐ¼ÐµÑ‚ÑŒ Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð½Ðµ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ Ð´Ð²ÑƒÐ¼Ñ Ñ‡Ð¸ÑÐ»Ð°Ð¼Ð¸, Ð° Ñ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸ÐµÐ¼ Ð»ÑŽÐ±Ð¾Ð¹ Ð´Ð»Ð¸Ð½Ñ‹.
ðŸ“Œ ÐŸÑ€Ð¸Ð¼ÐµÑ€:
Ð’Ð²Ð¾Ð´:  2 + 3 * 4 - 5 / 2
Ð’Ñ‹Ð²Ð¾Ð´:  11.5
Ð£ÑÐ»Ð¾Ð²Ð¸Ñ:
1.	ÐŸÐ¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»ÑŒ Ð²Ð²Ð¾Ð´Ð¸Ñ‚ ÑÑ‚Ñ€Ð¾ÐºÑƒ Ð²Ñ‹Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (2 + 3 * 4 - 5 / 2).
2.	ÐÑƒÐ¶Ð½Ð¾ Ð¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ð¾ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ñ‚ÑŒ Ð¿Ñ€Ð¸Ð¾Ñ€Ð¸Ñ‚ÐµÑ‚ Ð¾Ð¿ÐµÑ€Ð°Ñ†Ð¸Ð¹ (* Ð¸ / Ð²Ñ‹ÑˆÐµ, Ñ‡ÐµÐ¼ + Ð¸ -, Ð° ** ÐµÑ‰Ñ‘ Ð²Ñ‹ÑˆÐµ).
3.	ÐžÑˆÐ¸Ð±ÐºÐ¸ Ð¿Ð¾-Ð¿Ñ€ÐµÐ¶Ð½ÐµÐ¼Ñƒ Ð¾Ð±Ñ€Ð°Ð±Ð°Ñ‚Ñ‹Ð²Ð°ÑŽÑ‚ÑÑ (Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ Ð½Ð° 0, Ð½ÐµÐ¿Ñ€Ð°Ð²Ð¸Ð»ÑŒÐ½Ñ‹Ð¹ Ð²Ð²Ð¾Ð´, Ð»Ð¸ÑˆÐ½Ð¸Ðµ ÑÐ¸Ð¼Ð²Ð¾Ð»Ñ‹).
4.	Ð Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ð² Ñ†Ð¸ÐºÐ»Ðµ, Ð²Ñ‹Ñ…Ð¾Ð´ Ð¿Ð¾ exit.
5.	ÐÐµÐ»ÑŒÐ·Ñ Ð¸ÑÐ¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÑŒ eval() Ð¸ exec() â€” Ð½ÑƒÐ¶Ð½Ð¾ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ð»Ð¾Ð³Ð¸ÐºÑƒ ÑÐ°Ð¼Ð¾Ð¼Ñƒ.
'''
import operator
import  re

if __name__ != '__main__':
    print(f'\nThis file not for import!!!')

if __name__ == '__main__':

    def operations(user_lst: list)-> float:
        ''' func receives list with three symbols - first symbol is first number, second is operator and third is second number. As result function return result of operation with thous numbers according to second symbol '''

        operator_list = {
            '+': operator.add,
            '-': operator.sub,
            '*': operator.mul,
            '/': operator.truediv,
            '**': operator.pow,
        }

        return float(operator_list[user_lst[1]](user_lst[0], user_lst[2]))

    def user_input():
        ''' This function take input from user, check it for correct format and for stop word "exit". If user string format correct, then return user string, if not check for stop word if user string contain only stop word in any register program will stop, if not it wil ask to repeat input again  '''

        while True:
            user_string = input(f'\nPlease enter expression in format:'
                                f'\nnumber space operator space number,'
                                f'\nas example'
                                f'\n5 + 3: ')

            if re.fullmatch(r'-?\d+\.?\d* (\+|-|/|\*{0,2}) -?\d+\.?\d*', user_string):
                return user_string
            elif user_string.lower() == 'exit':
                return 'exit'

            else:
                print(f'\nYou are entered something wrong, please try again')

    def make_list(user_string: str)-> list:
        ''' This function receives string (supposed from user_input() function) in following format: number space operator symbol space number and make from it list of three position. Next it will check that positions 1 and 3 are numbers, if not call back  user_input() function, if there are numbers it wil create list in format [float, operator symbol, float] and return it'''
        user_list = user_string.split()
        try:
            n1 = float(user_list[0])
            check_1 = 'good'
        except ValueError:
            check_1 = 'bad'

        try:
            n2 = float(user_list[2])
            check_2 = 'good'
        except ValueError:
            check_2 = 'bad'

        if check_1 == 'good' and check_2 == 'good':

            return [n1, user_list[1], n2]
        else:
            print(f'\nYou are entered something wrong, please try again')
            return 'false_list'


    while True:

        user_string = user_input()
        if user_string == 'exit':
            print(f'\nProgram finished')
            break
        else:
            user_list = make_list(user_string)
            if user_list == 'false_list':
                continue
            else:
                print(operations(user_list))









