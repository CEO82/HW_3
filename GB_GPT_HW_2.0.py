'''

*
ĞœĞ¸Ğ½Ğ¸-ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ ÑĞ¾ Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ĞºĞ°Ğ¼Ğ¸
ĞĞ°Ğ¿Ğ¸ÑˆĞ¸ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ñƒ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ:
1.	Ğ—Ğ°Ğ¿Ñ€Ğ°ÑˆĞ¸Ğ²Ğ°ĞµÑ‚ Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ÑÑ‚Ñ€Ğ¾ĞºÑƒ Ğ²Ğ¸Ğ´Ğ°:
2.	Ñ‡Ğ¸ÑĞ»Ğ¾ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ñ‡Ğ¸ÑĞ»Ğ¾
ĞĞ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€:
15 + 7
10 / 0
3 ** 4
3.	ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ĞµÑ‚ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸: +, -, *, /, ** (Ğ²Ğ¾Ğ·Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ² ÑÑ‚ĞµĞ¿ĞµĞ½ÑŒ).
4.	Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ»Ñ:
o	Ğ¿Ğ°Ñ€ÑĞ¸Ğ½Ğ³Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ¸;
o	Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¸;
o	Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ³Ğ¾ Ñ†Ğ¸ĞºĞ»Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€Ğ°.
5.	ĞĞ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ Ğ¾ÑˆĞ¸Ğ±ĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· try / except:
o	Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° Ğ½Ğ¾Ğ»ÑŒ;
o	Ğ½ĞµĞ²ĞµÑ€Ğ½Ñ‹Ğ¹ Ğ²Ğ²Ğ¾Ğ´ (Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€, a + b);
o	Ğ½ĞµĞ¸Ğ·Ğ²ĞµÑÑ‚Ğ½Ğ°Ñ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ñ.
6.	Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ² Ñ†Ğ¸ĞºĞ»Ğµ Ğ´Ğ¾ Ñ‚ĞµÑ… Ğ¿Ğ¾Ñ€, Ğ¿Ğ¾ĞºĞ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğµ Ğ²Ğ²ĞµĞ´ĞµÑ‚ exit.
*
Ğ¢ĞµĞ¿ĞµÑ€ÑŒ ĞºĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑƒĞ¼ĞµÑ‚ÑŒ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ½Ğµ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ñ Ğ´Ğ²ÑƒĞ¼Ñ Ñ‡Ğ¸ÑĞ»Ğ°Ğ¼Ğ¸, Ğ° Ñ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸ĞµĞ¼ Ğ»ÑĞ±Ğ¾Ğ¹ Ğ´Ğ»Ğ¸Ğ½Ñ‹.
ğŸ“Œ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€:
Ğ’Ğ²Ğ¾Ğ´:  2 + 3 * 4 - 5 / 2
Ğ’Ñ‹Ğ²Ğ¾Ğ´:  11.5
Ğ£ÑĞ»Ğ¾Ğ²Ğ¸Ñ:
1.	ĞŸĞ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ²Ğ²Ğ¾Ğ´Ğ¸Ñ‚ ÑÑ‚Ñ€Ğ¾ĞºÑƒ Ğ²Ñ‹Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ñ (2 + 3 * 4 - 5 / 2).
2.	ĞÑƒĞ¶Ğ½Ğ¾ Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ (* Ğ¸ / Ğ²Ñ‹ÑˆĞµ, Ñ‡ĞµĞ¼ + Ğ¸ -, Ğ° ** ĞµÑ‰Ñ‘ Ğ²Ñ‹ÑˆĞµ).
3.	ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ¿Ğ¾-Ğ¿Ñ€ĞµĞ¶Ğ½ĞµĞ¼Ñƒ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ°Ñ‚Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ (Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ Ğ½Ğ° 0, Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ²Ğ²Ğ¾Ğ´, Ğ»Ğ¸ÑˆĞ½Ğ¸Ğµ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñ‹).
4.	Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ² Ñ†Ğ¸ĞºĞ»Ğµ, Ğ²Ñ‹Ñ…Ğ¾Ğ´ Ğ¿Ğ¾ exit.
5.	ĞĞµĞ»ÑŒĞ·Ñ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ eval() Ğ¸ exec() â€” Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ½Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ ÑĞ°Ğ¼Ğ¾Ğ¼Ñƒ.
*
'''

if __name__ != '__main__':
    print(f'\nThis file not for import!!!')

if __name__ == '__main__':

    import operator
    import re


    def operations(n1, op, n2):
        ''' This function receives  three arguments firs number - n1, operation - op, second number - n2. And will return result of operation. If any errors appear it will show message with original string and message that user entered something wrong and send user to repeat input '''

        print(f'{n1}  {op}  {n2}')
        operator_list = {
            '+': operator.add,
            '-': operator.sub,
            '*': operator.mul,
            '/': operator.truediv,
            '**': operator.pow,
        }

        return operator_list[op](n1, n2)

    def user_input():

        ''' This function take input from user, check it for correct format and for stop word "exit". If user string format correct, then return user string, if not check for stop word if user string contain only stop word in any register program will stop, if not it wil ask to repeat input again  '''

        while True:
            user_string = input(f'\nPlease enter expression in format:'
                                f'\nnumber space operator space number,'
                                f'\nbut without brackets'
                                f'\nas example'
                                f'\n5 + 3 * 4 -2 ** 2 / 3: ')

            if re.fullmatch(r'-?\d+\.?\d* (\+|-|/|\*{0,2}) -?\d+\.?\d*', user_string):
                return user_string
            elif user_string.lower() == 'exit':
                return 'exit'

            else:
                print(f'\nYou are entered something wrong, please try again')

    def make_list(user_string: str)-> list:
        ''' This function receives string (supposed from user_input() function) in following format: number space operator symbol space number and make from it list of three position. Next it will check that positions 1 and 3 are numbers, if not call back  user_input() function, if there are numbers it wil create list in format [float, operator symbol, float] and return it'''
        user_list = user_string.split()
        try:
            n1 = float(user_list[0])
            n2 = float(user_list[2])
            return [n1, user_list[1], n2]
        except ValueError:
            print(f'\nYou are entered something wrong, please try again')
            return 'false_list'


    test_string = '4 + 3 * 2 - 5 + 20 * 22 / 5 ** 2 - 2 ** 0.5'

    test_list = test_string.split()

    ''' ['4', '+', '3 * 2', '-', '5', '+', '20', '*', '22', '/', '5', '**', '2', '-', '2', '**', '0.5'] '''

    print(test_list)


    def operation_sequence(user_list: list):
        ''' This function receives prepaired list of floats and operators and step by step make operations by function 'operations()' in user expression in order according to operation rang which is given by operators_list'''

        operators_list = ['**', '*', '/', '+', '-']

        for oper_symb in operators_list:
            while True:  # For / operation!

                if user_list.count(oper_symb) > 0:
                    ind_n1 = user_list.index(oper_symb) - 1
                    ind_op = user_list.index(oper_symb)
                    ind_n2 = user_list.index(oper_symb) + 1

                    n1 = float(user_list[ind_n1])
                    op = user_list[ind_op]
                    n2 = float(user_list[ind_n2])

                    result_numb = operations(n1, op, n2)

                    user_list.pop(ind_n1)
                    user_list.pop(ind_n1)
                    user_list.pop(ind_n1)

                    user_list.insert(ind_n1, result_numb)

                    continue

                else:
                    print(user_list)
                    break


